<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gym Tracker</title>

<style>
body{
  background:#ffffff;
  color:#1c1c1c;
  font-family:Arial, sans-serif;
  margin:15px;
}

h1{
  text-align:center;
  color:#ff4da6;
}

h2{
  margin-top:25px;
  color:#ff4da6;
}

button{
  padding:12px;
  margin:8px 0;
  width:100%;
  border:none;
  border-radius:12px;
  background:#ff4da6;
  color:white;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}

.exercise{
  background:#f9f9f9;
  padding:15px;
  margin:12px 0;
  border-radius:16px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
}

.superset{
  border:2px solid #ff4da6;
  border-radius:16px;
  padding:10px;
  margin:15px 0;
  background:#fefefe;
}

input{
  width:65px;
  padding:5px;
  margin:4px;
  border:1px solid #ccc;
  border-radius:6px;
  text-align:center;
}

.last{
  font-size:12px;
  color:#555;
  margin-top:6px;
}

.hidden{ display:none; }
</style>
</head>
<body>

<div id="home">
  <h1>Gym Tracker</h1>
  <button onclick="loadDay('Lower A')">1 - Lower A</button>
  <button onclick="loadDay('Upper A')">2 - Upper A</button>
  <button onclick="loadDay('Lower B')">3 - Lower B</button>
  <button onclick="loadDay('Upper B')">4 - Upper B</button>
  <button onclick="showHistory()">üìÖ Historial</button>
</div>

<div id="workout" style="display:none;">
  <button onclick="goHome()">‚Üê Volver</button>
  <h1 id="dayTitle"></h1>
  <div id="content"></div>
</div>

<script>

const workouts = {

"Lower A":{
warmup:[
"Puente de Gl√∫teo",
"Desplazamiento lateral con banda"
],
training:[
"Hip Thrust",
"Sentadilla b√∫lgara con mancuerna",
"Peso muerto rumano",
"Abducci√≥n de cadera en m√°quina",
"Extensi√≥n de gemelos",
{type:"time", name:"Plancha abdominal isom√©trica"}
]
},

"Lower B":{
warmup:[
"Puente de Gl√∫teo",
"Desplazamiento lateral con banda"
],
training:[
"Hip Thrust",
"Extensi√≥n de cadera baja en polea",
"Sentadilla sumo en multipower",
"Clamshell",
"Curl de femoral tumbada",
"Extensi√≥n de cu√°driceps"
]
},

"Upper A":{
warmup:[
"Movilidad hombro flexi√≥n",
"Movilidad hombro extensi√≥n",
"Movilidad completa de hombro"
],
training:[
"Flexiones",
"Jal√≥n al pecho prono",
"Remo agarre neutro",
"Pull over",
"Face pull",
{type:"time", name:"Cardio"}
]
},

"Upper B":{
warmup:[
"Movilidad hombro flexi√≥n",
"Movilidad hombro extensi√≥n",
"Movilidad completa de hombro"
],
training:[
{type:"superset", exercises:["Dominadas asistidas en m√°quina","Flexiones"]},
"Remo unilateral con mancuerna",
"Press hombro m√°quina",
"Elevaciones laterales con mancuernas",
"Aperturas invertidas en m√°quina",
{type:"time", name:"Cardio"}
]
}

};

let currentDay = "";

function loadDay(day){
currentDay = day;
document.getElementById("home").style.display="none";
document.getElementById("workout").style.display="block";
document.getElementById("dayTitle").textContent=day;

const content=document.getElementById("content");
content.innerHTML="";

addSection("Calentamiento",workouts[day].warmup,content);
addSection("Entrenamiento",workouts[day].training,content);

// Bot√≥n de guardar entrenamiento al final
const saveBtn = document.createElement("button");
saveBtn.textContent = "üíæ Guardar Entrenamiento";
saveBtn.onclick = saveWorkout;
content.appendChild(saveBtn);
}

function goHome(){
document.getElementById("home").style.display="block";
document.getElementById("workout").style.display="none";
}

function addSection(title,list,parent){
const h=document.createElement("h2");
h.textContent=title;
parent.appendChild(h);

list.forEach(item=>{
if(typeof item==="string"){
parent.appendChild(createExercise(item));
}
else if(item.type==="time"){
parent.appendChild(createTimeExercise(item.name));
}
else if(item.type==="superset"){
parent.appendChild(createSuperset(item.exercises));
}
});
}

function createExercise(name){

const div=document.createElement("div");
div.className="exercise";

div.innerHTML=`<h3>${name}</h3>`;

for(let i=1;i<=3;i++){
div.innerHTML+=`
<div>Serie ${i}</div>
<div>
Reps <input type="number" id="${name}-r${i}">
Peso <input type="number" id="${name}-p${i}">
</div>
<br>`;
}

div.innerHTML+=`<div class="last" id="${name}-last"></div>`;

loadWeight(name);
return div;
}

function createTimeExercise(name){

const div = document.createElement("div");
div.className = "exercise";

div.innerHTML = `<h3>${name}</h3>`;

if(name.toLowerCase().includes("plancha")){
  for(let i=1;i<=3;i++){
    div.innerHTML += `
      <div>Serie ${i}</div>
      <div>
        Minutos <input type="number" id="${name}-t${i}">
      </div><br>
    `;
  }
} else {
  div.innerHTML += `
    Minutos <input type="number" id="${name}-time"><br>
  `;
}

div.innerHTML += `<div class="last" id="${name}-last"></div>`;
loadTime(name);
return div;
}

function createSuperset(exercises){

const container=document.createElement("div");
container.className="superset";
container.innerHTML="<h3>Superserie</h3>";

exercises.forEach(name=>{
container.appendChild(createExercise(name));
});

return container;
}

// Guardar todo el entrenamiento
function saveWorkout(){
const day = currentDay;
const items = document.querySelectorAll(".exercise");
const today = new Date().toISOString().split('T')[0];

let hist = JSON.parse(localStorage.getItem('historial')) || {};
if(!hist[today]) hist[today] = {};

items.forEach(div=>{
const name = div.querySelector("h3").textContent;

// Cardio o planchas con series
if(div.querySelector("#"+name+"-time") || div.querySelector("#"+name+"-t1")){
  let data;
  if(div.querySelector("#"+name+"-t1")){
    data = [];
    for(let i=1;i<=3;i++){
      const t = document.getElementById(name+"-t"+i).value;
      data.push({t});
    }
  } else {
    const t = document.getElementById(name+"-time").value;
    data = t;
  }
  localStorage.setItem(name,JSON.stringify(data));
  hist[today][name] = data;
} else {
  // Series con peso
  let data = [];
  for(let i=1;i<=3;i++){
    const r = document.getElementById(name+"-r"+i).value;
    const p = document.getElementById(name+"-p"+i).value;
    data.push({r,p});
  }
  localStorage.setItem(name,JSON.stringify(data));
  hist[today][name] = data;
}
});

localStorage.setItem('historial', JSON.stringify(hist));
alert("‚úÖ Entrenamiento guardado!");
loadDay(day); // recarga los valores guardados
}

function loadWeight(name){
  const saved = localStorage.getItem(name);
  if(!saved) return;
  const data = JSON.parse(saved);
  if(!Array.isArray(data)) return;
  let text = "√öltimo: " + data.map(d=>`${d.r}x${d.p}`).join(" | ");
  document.getElementById(name+"-last").textContent = text;
}

function loadTime(name){
  const saved = localStorage.getItem(name);
  if(!saved) return;
  const data = JSON.parse(saved);
  let text = "√öltimo: ";
  if(Array.isArray(data)){
    text += data.map(d=>d.t).join(" | ") + " min";
  } else {
    text += data + " min";
  }
  document.getElementById(name+"-last").textContent = text;
}

// Mostrar historial
function showHistory(){
document.getElementById("home").style.display="none";
document.getElementById("workout").style.display="block";
document.getElementById("dayTitle").textContent="üìÖ Historial";
const content = document.getElementById("content");
content.innerHTML="";

const hist = JSON.parse(localStorage.getItem('historial')) || {};
const dates = Object.keys(hist).sort().reverse();

if(dates.length === 0){
    content.innerHTML="<p>No hay entrenamientos guardados.</p>";
    return;
}

dates.forEach(date=>{
    const dayDiv = document.createElement("div");
    dayDiv.style.border="1px solid #ff4da6";
    dayDiv.style.borderRadius="12px";
    dayDiv.style.margin="10px 0";
    dayDiv.style.padding="8px";
    const toggleId = "toggle-"+date;
    dayDiv.innerHTML = `<h3 style="cursor:pointer;color:#ff4da6;" onclick="document.getElementById('${toggleId}').classList.toggle('hidden')">${date}</h3>
    <div id="${toggleId}" class="hidden">`;

    const exercises = hist[date];
    for(let ex in exercises){
        let val = exercises[ex];
        if(Array.isArray(val)){
            if(val[0].r) val = val.map(d=>`${d.r}x${d.p}`);
            else val = val.map(d=>`${d.t} min`);
            dayDiv.innerHTML += `<b>${ex}</b>: ${val.join(" | ")}<br>`;
        } else {
            dayDiv.innerHTML += `<b>${ex}</b>: ${val} min<br>`;
        }
    }

    dayDiv.innerHTML += "</div>";
    content.appendChild(dayDiv);
});

// Bot√≥n volver al home
const back = document.createElement("button");
back.textContent = "‚Üê Volver";
back.onclick = goHome;
content.insertBefore(back, content.firstChild);
}

function v(id){
return document.getElementById(id).value;
}

</script>

</body>
</html>
